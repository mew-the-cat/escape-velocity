(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{24:function(e,t,i){},32:function(e,t,i){},39:function(e,t,i){"use strict";i.r(t);var r,n,s,c=i(0),a=i.n(c),o=i(8),l=i.n(o),d=(i(32),i(24),i(6)),u=i(5),b=i(12),h=i(13),j=h.a.button(r||(r=Object(b.a)(["\n  width: 9%;\n  height: 9%;\n\n  font-size: ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border: 1px solid white;\n  border-collapse: collapse;\n  border-radius: 5px;\n"])),(function(e){return e.characters.length,"8px"}),(function(e){return 0===e.characters.length?e.tiletype.color:"repeating-linear-gradient(45deg, white, white 10px, "+e.tiletype.color+" 10px,  "+e.tiletype.color+" 20px)"}),(function(e){return 0===e.characters.length?"black":"white"}),(function(e){return 0===e.characters.length?"normal":"bold"})),p=i(1),O=function(e){for(var t=e.tiles,i=e.onClick,r=[],n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++){var c=i.bind(undefined,s,n);r.push(Object(p.jsx)(j,{tiletype:t[s][n].type,characters:t[s][n].characters,onClick:c,children:0!==t[s][n].characters.length?"X":"("+s+","+n+")"},"Cell"+s+":"+n))}r.push(Object(p.jsx)("br",{},"LineBreak"+n))}return Object(p.jsx)("span",{className:"map",children:r})},m=3,f={x:5,y:5},x=100,v=20,g=5,y=function(e){var t=e.phase,i=e.characters;return Object(p.jsxs)("span",{className:"statusbar",children:[Object(p.jsx)("b",{children:"Status bar"}),Object(p.jsx)("br",{}),"Turn: ",t.turn," (00:00:0",t.untilNextTurn,")",Object(p.jsx)("br",{}),"Action Points: ",i[0].ap," / ",v,Object(p.jsx)("br",{}),"Health Points: ",i[0].hp," / ",x,Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})},C=h.a.input(n||(n=Object(b.a)(["\n  width: 150px;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: rgb(102, 217, 255);\n  border-radius: 5px;\n  border: 2px solid rgb(204, 242, 255);\n  color: white;\n  font-size: 14px;\n"]))),I=function(e){var t=e.onClickSearch,i=e.onClickCraft;return Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Actions"}),Object(p.jsx)("br",{}),Object(p.jsx)(C,{type:"button",value:"Search",onClick:t}),Object(p.jsx)(C,{type:"button",value:"Craft",onClick:i})]})},A=i(22),N=function(e){var t=e.alertText,i=e.isVisible;return Object(p.jsx)("span",{className:"alertbar",children:Object(p.jsxs)(A.a,{show:i,variant:t.variant,children:[Object(p.jsx)(A.a.Heading,{children:t.header}),t.body]},"mainAlert")})},M=i(4),E=function e(t,i,r){Object(M.a)(this,e),this.header=void 0,this.body=void 0,this.variant=void 0,this.header=t,this.body=i,this.variant=r};!function(e){e.WARNING="warning",e.PRIMARY="primary",e.SUCCESS="success"}(s||(s={}));var w,U={START:new E("Your starship was heavily damaged during an orbital fight...","Pilots managed to perform an emergency landing on the planet below. The vessel is irreversibly damaged. Fellow crew is dead. Endless jungle covering the entire surface.",s.PRIMARY),OUT_OF_AP:new E("Out of Action Points","You are too tired to perform this action and need to chill for a  while. AP recover with time. Action Points recover gradually with time.",s.WARNING),CRAFT_NO_COMBINATION:new E("Engeneering Attempt Failed","You tried to tinker around with these items with no palpable success. It looks like you can't combine them into anything more or less interesting.",s.WARNING),CRAFT_NO_ITEMS:new E("Not Enough Items","Load at least 2 items in the Engineering Bay in order to process them.",s.WARNING),CRAFT_SUCCESS:new E("Engeneering Attempt Successful","You managed to process materials into a structurally more complex item.",s.SUCCESS)},R=[new function e(t,i){Object(M.a)(this,e),this.id=void 0,this.name=void 0,this.items=void 0,this.id=t,this.name=i,this.items=[]}(0,"Engineering Bay")],T=function e(t,i,r){Object(M.a)(this,e),this.id=void 0,this.name=void 0,this.color=void 0,this.id=t,this.name=i,this.color=r},S=[new T(0,"Forest","#32a871"),new T(1,"Starship","#929da6"),new T(2,"Impact Cleaning","#76a693")],k=function e(t,i,r){Object(M.a)(this,e),this.type=void 0,this.coords=void 0,this.characters=void 0,this.items=void 0,this.type=t,this.coords={x:i,y:r},this.characters=[],this.items=[]},_=function e(){Object(M.a)(this,e),this.turn=void 0,this.untilNextTurn=void 0,this.isNight=void 0,this.turn=1,this.untilNextTurn=m-1,this.isNight=!1},P=function e(t,i,r,n,s,c){Object(M.a)(this,e),this.id=void 0,this.hp=void 0,this.ap=void 0,this.coords=void 0,this.items=void 0,this.itemsMax=void 0,this.id=t,this.hp=i,this.ap=r,this.coords={x:n,y:s},this.itemsMax=c,this.items=[]},D=function e(){Object(M.a)(this,e),this.alertActive=void 0,this.untilAlertDismissed=void 0,this.alertActive=U.START,this.untilAlertDismissed=600};!function(e){e.UBIQUITOUS="UBIQUITOUS",e.COMMON="COMMON",e.UNCOMMON="UNCOMMON",e.RARE="RARE",e.SCARCE="SCARCE",e.UNIQUE="UNIQUE"}(w||(w={}));var B,F,Q=function e(t,i,r){Object(M.a)(this,e),this.id=void 0,this.name=void 0,this.rarity=void 0,this.id=t,this.name=i,this.rarity=r},W=[new Q(0,"Log",w.UBIQUITOUS),new Q(1,"Plank",w.COMMON),new Q(2,"Wooden Beam",w.RARE),new Q(3,"Iron Ore",w.COMMON),new Q(4,"Iron Bar",w.UNCOMMON),new Q(5,"Iron Sheet",w.RARE),new Q(6,"Broken Circuit Board",w.UNCOMMON),new Q(7,"Electronic Plate",w.SCARCE),new Q(8,"Transistor Radio",w.UNIQUE),new Q(9,"Copper Ore",w.COMMON),new Q(10,"Copper Wire",w.SCARCE),new Q(11,"Antenna",w.UNIQUE)],Y=function(){var e=H(L());return e[Math.floor(Math.random()*e.length)]},H=function(e){for(var t=[],i=0;i<W.length;i++)W[i].rarity===e&&t.push(W[i]);return t},L=function(){var e=100*Math.random();return e<=35?w.UBIQUITOUS:e>35&&e<=65?w.COMMON:e>65&&e<=85?w.UNCOMMON:e>85&&e<=95?w.RARE:w.SCARCE},G=i(3);!function(e){e.ITEM_UBIQUITOUS="rgb(206, 188, 160)",e.ITEM_COMMON="rgb(148, 148, 184)",e.ITEM_UNCOMMON="rgb(151, 184, 250)",e.ITEM_RARE="rgb(255, 181, 54)",e.ITEM_SCARCE="rgb(242, 114, 114)",e.ITEM_UNIQUE="rgb(227, 0, 91)"}(B||(B={}));var z=h.a.input(F||(F=Object(b.a)(["\n  width: 80%;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: ","\n    ","\n    ","\n    ","\n    ","\n    ",";\n  border: none;\n  border-radius: 5px;\n  color: white;\n  text-align: center;\n  font-size: 14px;\n"])),(function(e){return e.rarity===w.UBIQUITOUS&&B.ITEM_UBIQUITOUS}),(function(e){return e.rarity===w.COMMON&&B.ITEM_COMMON}),(function(e){return e.rarity===w.UNCOMMON&&B.ITEM_UNCOMMON}),(function(e){return e.rarity===w.RARE&&B.ITEM_RARE}),(function(e){return e.rarity===w.SCARCE&&B.ITEM_SCARCE}),(function(e){return e.rarity===w.UNIQUE&&B.ITEM_UNIQUE})),J=i(9),V=function(e){var t=e.characters,i=e.onClick;return Object(p.jsx)(J.c,{droppableId:"items-inventory",isDropDisabled:t[0].items.length>=t[0].itemsMax,children:function(e){return Object(p.jsxs)("ul",Object(G.a)(Object(G.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t[0].items.map((function(e,t){return Object(p.jsx)(J.b,{draggableId:"item-inventory-"+t,index:t,children:function(r){return Object(p.jsx)("li",Object(G.a)(Object(G.a)(Object(G.a)({ref:r.innerRef},r.draggableProps),r.dragHandleProps),{},{children:Object(p.jsx)(z,{type:"submit",value:e.name,rarity:e.rarity,onClick:function(){return i(t)}})}))}},t)})),e.placeholder]}))}})},X=function(e){var t=e.characters,i=e.onClick,r=e.onDragEnd;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("b",{children:["Inventory (",t[0].items.length,"/",t[0].itemsMax,")"]}),Object(p.jsx)("br",{}),Object(p.jsx)(V,{characters:t,onClick:i,onDragEnd:r})]})},q=function(e){var t=e.characters,i=e.tiles,r=e.onClick,n=t[0].coords.x,s=t[0].coords.y;return Object(p.jsx)(J.c,{droppableId:"items-cell",children:function(e){return Object(p.jsxs)("ul",Object(G.a)(Object(G.a)({},e.droppableProps),{},{ref:e.innerRef,children:[i[n][s].items.map((function(e,t){return Object(p.jsx)(J.b,{draggableId:"item-cell-"+t,index:t,children:function(e){return Object(p.jsx)("li",Object(G.a)(Object(G.a)(Object(G.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(p.jsx)(z,{type:"submit",value:i[n][s].items[t].name,rarity:i[n][s].items[t].rarity,onClick:function(){return r(t)}})}))}},t)})),e.placeholder]}))}})},K=function(e){var t=e.characters,i=e.tiles,r=e.onClick,n=e.onDragEnd,s=t[0].coords.x,c=t[0].coords.y;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("b",{children:[i[s][c].type.name," (",s,", ",c,")"]}),Object(p.jsx)("br",{}),Object(p.jsx)(q,{characters:t,tiles:i,onClick:r,onDragEnd:n})]})},Z=function(e){var t=e.construction,i=e.onClick;return Object(p.jsx)(J.c,{droppableId:"items-craft",children:function(e){return Object(p.jsxs)("ul",Object(G.a)(Object(G.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t.items.map((function(e,t){return Object(p.jsx)(J.b,{draggableId:"item-craft-"+t,index:t,children:function(r){return Object(p.jsx)("li",Object(G.a)(Object(G.a)(Object(G.a)({ref:r.innerRef},r.draggableProps),r.dragHandleProps),{},{children:Object(p.jsx)(z,{type:"submit",value:e.name,rarity:e.rarity,onClick:function(){return i(t)}})}))}},t)})),e.placeholder]}))}})},$=function(e){var t=e.construction,i=e.onClick,r=e.onDragEnd;return Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Engineering Bay"}),Object(p.jsx)("br",{}),Object(p.jsx)(Z,{construction:t,onClick:i,onDragEnd:r})]})},ee=function(e){var t=e.characters,i=e.tiles,r=e.construction,n=e.onClickInventory,s=e.onClickCell,a=e.onDragEnd,o=Object(c.useState)(!1),l=Object(u.a)(o,2),d=l[0],b=l[1];return Object(c.useEffect)((function(){var e=t[0].coords.x,i=t[0].coords.y;b(5===e&&5===i)}),[t[0].coords.x,t[0].coords.y]),Object(p.jsx)(J.a,{onDragEnd:a,children:Object(p.jsx)("table",{className:"itembar",children:Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{className:"itemlists",children:[Object(p.jsx)("td",{className:"itemlist",children:Object(p.jsx)(X,{characters:t,onClick:n,onDragEnd:a})}),Object(p.jsx)("td",{className:"itemlist",children:Object(p.jsx)(K,{characters:t,tiles:i,onClick:s,onDragEnd:a})}),d&&Object(p.jsx)("td",{className:"itemlist",children:Object(p.jsx)($,{construction:r,onClick:s,onDragEnd:a})})]})})})})},te=function e(t,i){Object(M.a)(this,e),this.itemCombination=[],this.itemResult=void 0,this.itemCombination=t,this.itemResult=i},ie=[new te([W[0],W[0]],W[1]),new te([W[1],W[1]],W[2]),new te([W[3],W[3]],W[4]),new te([W[4],W[4]],W[5]),new te([W[6],W[6]],W[7]),new te([W[7],W[7]],W[8]),new te([W[9],W[9]],W[10]),new te([W[10],W[10]],W[11])],re=function(){var e=function(){for(var e=new Array(11),t=0;t<e.length;t++){e[t]=new Array(11);for(var i=0;i<e[t].length;i++)e[t][i]=new k(S[0],t,i)}e[5][5].type=S[1],e[4][4].type=S[2],e[5][4].type=S[2],e[6][4].type=S[2],e[4][5].type=S[2],e[6][5].type=S[2],e[4][6].type=S[2],e[5][6].type=S[2],e[6][6].type=S[2],e[5][5].characters.push(new P(1,x,v,f.x,f.y,6));var r=[];r.push(new P(1,x,v,f.x,f.y,6));var n=new _,s=[],c=R[0];return s.push(c),{characters:r,phase:n,tiles:e,constructions:s,userPrompt:new D}}(),t=Object(c.useState)(e.characters),i=Object(u.a)(t,2),r=i[0],n=i[1],s=Object(c.useState)(e.phase),a=Object(u.a)(s,2),o=a[0],l=a[1],b=Object(c.useState)(e.tiles),h=Object(u.a)(b,2),j=h[0],C=h[1],A=Object(c.useState)(e.constructions),M=Object(u.a)(A,2),E=M[0],w=M[1],T=Object(c.useState)(e.userPrompt),B=Object(u.a)(T,2),F=B[0],Q=B[1],W=function(){var e=Object(d.a)(r),t=o,i=F;t.untilNextTurn>0?t.untilNextTurn-=1:(t.turn+=1,t.untilNextTurn=m-1,e[0].ap<v&&(e[0].ap+=1)),i.untilAlertDismissed>0&&(i.untilAlertDismissed-=1),n(Object(d.a)(e)),Q(i),l(t)},H=function(e){var t=F;t.alertActive=e,t.untilAlertDismissed=g,Q(t)},L=function(e,t){return Math.max(Math.abs(j[e][t].coords.x-r[0].coords.x),Math.abs(j[e][t].coords.y-r[0].coords.y))};return Object(c.useEffect)((function(){setInterval(W,1e3)}),[]),Object(p.jsxs)("div",{className:"ui",children:[Object(p.jsxs)("div",{className:"ui-row1",children:[Object(p.jsx)(O,{tiles:j,onClick:function(e,t){if(r[0].ap>0){if(1===L(e,t)){var i=Object(d.a)(r),s=Object(d.a)(j),c=r[0].coords.x,a=r[0].coords.y;i[0].ap-=1,i[0].coords={x:e,y:t},s[c][a].characters=[],s[e][t].characters.push(i[0]),n(i),C(s)}}else H(U.OUT_OF_AP)}}),Object(p.jsx)(ee,{characters:r,tiles:j,construction:E[0],onClickInventory:function(e){var t=r[0].coords.x,i=r[0].coords.y,s=Object(d.a)(r),c=Object(d.a)(j);c[t][i].items.push(r[0].items[e]),s[0].items.splice(e,1),n(s),C(c)},onClickCell:function(e){if(r[0].items.length<=r[0].itemsMax-1){var t=Object(d.a)(r),i=Object(d.a)(j),s=r[0].coords.x,c=r[0].coords.y;t[0].items.push(j[s][c].items[e]),i[s][c].items.splice(e,1),n(t),C(i)}},onDragEnd:function(e){if(e.destination){var t=Object(d.a)(r),i=Object(d.a)(j),s=E,c=r[0].coords.x,a=r[0].coords.y;if(e.source.droppableId===e.destination.droppableId){if("items-inventory"===e.source.droppableId){var o=Array.from(r[0].items),l=o.splice(e.source.index,1),b=Object(u.a)(l,1)[0];o.splice(e.destination.index,0,b),t[0].items=o}if("items-cell"===e.source.droppableId){var h=Array.from(j[c][a].items),p=h.splice(e.source.index,1),O=Object(u.a)(p,1)[0];h.splice(e.destination.index,0,O),i[c][a].items=h}if("items-craft"===e.source.droppableId){var m=Array.from(E[0].items),f=m.splice(e.source.index,1),x=Object(u.a)(f,1)[0];m.splice(e.destination.index,0,x),s[0].items=m}}if(e.source.droppableId!==e.destination.droppableId){var v=Array(0),g=Array(0);if("items-inventory"===e.source.droppableId&&"items-cell"===e.destination.droppableId){v=Array.from(r[0].items),g=Array.from(j[c][a].items);var y=v.splice(e.source.index,1),I=Object(u.a)(y,1)[0];g.splice(e.destination.index,0,I),t[0].items=v,i[c][a].items=g}else if("items-cell"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&r[0].items.length<=r[0].itemsMax-1){v=Array.from(j[c][a].items),g=Array.from(r[0].items);var A=v.splice(e.source.index,1),N=Object(u.a)(A,1)[0];g.splice(e.destination.index,0,N),i[c][a].items=v,t[0].items=g}if("items-inventory"===e.source.droppableId&&"items-craft"===e.destination.droppableId){v=Array.from(r[0].items),g=Array.from(E[0].items);var M=v.splice(e.source.index,1),U=Object(u.a)(M,1)[0];g.splice(e.destination.index,0,U),t[0].items=v,s[0].items=g}else if("items-craft"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&r[0].items.length<=r[0].itemsMax-1){v=Array.from(E[0].items),g=Array.from(r[0].items);var R=v.splice(e.source.index,1),T=Object(u.a)(R,1)[0];g.splice(e.destination.index,0,T),s[0].items=v,t[0].items=g}if("items-cell"===e.source.droppableId&&"items-craft"===e.destination.droppableId){v=Array.from(j[c][a].items),g=Array.from(E[0].items);var S=v.splice(e.source.index,1),k=Object(u.a)(S,1)[0];g.splice(e.destination.index,0,k),i[c][a].items=v,s[0].items=g}else if("items-craft"===e.source.droppableId&&"items-cell"===e.destination.droppableId){v=Array.from(E[0].items),g=Array.from(j[c][a].items);var _=v.splice(e.source.index,1),P=Object(u.a)(_,1)[0];g.splice(e.destination.index,0,P),s[0].items=v,i[c][a].items=g}}n(t),C(i),w(s)}}})]}),Object(p.jsxs)("div",{className:"ui-row2",children:[Object(p.jsx)(y,{phase:o,characters:r}),Object(p.jsx)(I,{onClickSearch:function(){if(r[0].ap>0){var e=Object(d.a)(r),t=Object(d.a)(j);if(e[0].ap-=1,r[0].items.length<=r[0].itemsMax-1)e[0].items.push(Y()),n(e);else{var i=r[0].coords.x,s=r[0].coords.y;t[i][s].items.push(Y()),n(e),C(t)}}else H(U.OUT_OF_AP)},onClickCraft:function(){if(E[0].items.length<2)H(U.CRAFT_NO_ITEMS);else if(r[0].ap<=0)H(U.OUT_OF_AP);else{var e=Object(d.a)(r),t=Object(d.a)(E);e[0].ap-=1,n(e);var i=!1;ie.forEach((function(e){if(e.itemCombination.length===E[0].items.length){var r=!0,n=Object(d.a)(t[0].items);if(e.itemCombination.forEach((function(e){n.includes(e)?n.splice(n.indexOf(e),1):r=!1})),r)return t[0].items=[e.itemResult],w(t),i=!0,void H(U.CRAFT_SUCCESS)}})),i||H(U.CRAFT_NO_COMBINATION)}}})]}),Object(p.jsx)("div",{className:"ui-row3",children:Object(p.jsx)(N,{alertText:F.alertActive,isVisible:F.untilAlertDismissed>0})})]})},ne=(i(38),function(){return Object(p.jsx)(re,{})}),se=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,41)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;i(e),r(e),n(e),s(e),c(e)}))};l.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ne,{})}),document.getElementById("root")),se()}},[[39,1,2]]]);
//# sourceMappingURL=main.4aeff3a8.chunk.js.map