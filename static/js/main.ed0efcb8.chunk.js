(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{14:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var a=s(2),r=s.n(a),i=s(9),c=s.n(i),n=(s(14),s(8),s(1)),h=s(3),o=s(6),l=s(5),p=s(4),u=5,j={x:5,y:5},b=100,d=4,v=function t(){Object(n.a)(this,t),this.untilTextTurn=u,this.turn=1,this.isNight=!1},O=function t(e,s){Object(n.a)(this,t),this.id=e,this.name=s},y=[new O(0," "),new O(1,"Log"),new O(2,"Iron Ore"),new O(3,"Stone"),new O(4,"Flint"),new O(5,"Stick"),new O(6,"Jade"),new O(7,"Fruits"),new O(8,"Nuts"),new O(9,"Broken metal plates"),new O(10,"Broken coil")],f=function t(e){Object(n.a)(this,t),this.size=e,this.slots=new Array(e);for(var s=0;s<this.slots.length;s++)this.slots[s]=y[0]},x=function t(e,s,a,r){Object(n.a)(this,t),this.hp=e,this.ap=s,this.coords={x:a,y:r},this.inventory=new f(6)},m=function t(e,s,a){Object(n.a)(this,t),this.type=e,this.coords={x:s,y:a},this.characters=[],this.items=[]},k=function t(e,s){Object(n.a)(this,t),this.id=e,this.name=s},C=[new k(0,"Forest"),new k(1,"Starship"),new k(2,"Impact Cleaning"),new k(3,"Clearing")],w=s(0),I=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){return Object(n.a)(this,s),e.call(this,t)}return Object(h.a)(s,[{key:"render",value:function(){if(0===this.props.characters.length)var t="",e="("+this.props.coords.x+", "+this.props.coords.y+")";else t="-player",e="X";switch(this.props.type.name){case C[0].name:var s="-forest";break;case C[1].name:s="-starship";break;case C[2].name:s="-impactclearing";break;default:s=""}return Object(w.jsx)("button",{className:"tile"+s+t,onClick:this.props.onClick,children:e})}}]),s}(r.a.Component),T=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){return Object(n.a)(this,s),e.call(this,t)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=[],e=0;e<this.props.tiles.length;e++){for(var s=0;s<this.props.tiles[e].length;s++){var a=this.props.onClick.bind(this,s,e);t.push(Object(w.jsx)(I,{coords:{x:s,y:e},type:this.props.tiles[s][e].type,characters:this.props.tiles[s][e].characters,onClick:a},"Cell"+s+":"+e))}t.push(Object(w.jsx)("br",{},"LineBreak"+e))}return t}}]),s}(r.a.Component),g=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"Status bar"}),Object(w.jsx)("br",{}),"Turn: ",this.props.phase.turn," (00:00:0",this.props.phase.untilTextTurn,")",Object(w.jsx)("br",{}),"Action points: ",this.props.characters[0].ap," / ",d,Object(w.jsx)("br",{}),"Health points: ",this.props.characters[0].hp," / ",b]})}}]),s}(r.a.Component),S=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"Actions"}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{className:"action",type:"button",value:"Search",onClick:this.props.onClick})]})}}]),s}(r.a.Component),N=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=new Array(this.props.characters[0].inventory.size),e=0;e<t.length;e++){var s=this.props.onClick.bind(this,e);t[e]=Object(w.jsx)("div",{children:Object(w.jsx)("input",{className:"item",type:"submit",value:this.props.characters[0].inventory.slots[e].name,onClick:s},"ItemInventoryInput"+e)},"ItemInventoryDiv"+e)}return Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"Inventory"}),Object(w.jsx)("br",{}),t]})}}]),s}(r.a.Component),A=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=this.props.characters[0].coords.x,e=this.props.characters[0].coords.y,s=new Array(this.props.tiles[t][e].items),a=0;a<this.props.tiles[t][e].items.length;a++){var r=this.props.onClick.bind(this,a);s[a]=Object(w.jsx)("div",{children:Object(w.jsx)("input",{className:"item",type:"submit",value:this.props.tiles[t][e].items[a].name,onClick:r},"ItemTileInput"+a)},"ItemTileDiv"+a)}return Object(w.jsxs)("div",{children:[Object(w.jsxs)("b",{children:[this.props.tiles[t][e].type.name," (",t,", ",e,")"]}),Object(w.jsx)("br",{}),s]})}}]),s}(r.a.Component),F=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){var a;Object(n.a)(this,s),a=e.call(this,t);for(var r=new Array(11),i=0;i<r.length;i++){r[i]=new Array(11);for(var c=0;c<r[i].length;c++)r[i][c]=new m(C[0],i,c)}r[5][5].characters.push(new x(b,d,j.x,j.y)),r[5][5].type=C[1],r[4][4].type=C[2],r[5][4].type=C[2],r[6][4].type=C[2],r[4][5].type=C[2],r[6][5].type=C[2],r[4][6].type=C[2],r[5][6].type=C[2],r[6][6].type=C[2];var h=[];h.push(new x(b,d,j.x,j.y));var l=new v;return a.state={tiles:r,characters:h,phase:l},a.handleClickTile=a.handleClickTile.bind(Object(o.a)(a)),a.handleClickSearch=a.handleClickSearch.bind(Object(o.a)(a)),a.handleClickItemInventory=a.handleClickItemInventory.bind(Object(o.a)(a)),a.handleClickItemTile=a.handleClickItemTile.bind(Object(o.a)(a)),setInterval(a.gameLoop.bind(Object(o.a)(a)),1e3),a}return Object(h.a)(s,[{key:"gameLoop",value:function(){if(this.state.phase.untilTextTurn>1){var t=this.state.tiles,e=this.state.characters;(s=this.state.phase).untilTextTurn-=1}else{var s;t=this.state.tiles;(e=this.state.characters)[0].ap<4&&(e[0].ap+=1),(s=this.state.phase).turn+=1,s.untilTextTurn=5}this.setState({tiles:t,characters:e,phase:s})}},{key:"render",value:function(){return Object(w.jsx)("table",{children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{rowSpan:"3",children:Object(w.jsx)(T,{tiles:this.state.tiles,onClick:this.handleClickTile})}),Object(w.jsx)("td",{colSpan:"2",className:"aux-window",children:Object(w.jsx)(g,{phase:this.state.phase,characters:this.state.characters})})]}),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:"2",className:"aux-window",children:Object(w.jsx)(S,{onClick:this.handleClickSearch})})}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{className:"aux-window",children:Object(w.jsx)(N,{characters:this.state.characters,onClick:this.handleClickItemInventory})}),Object(w.jsx)("td",{className:"aux-window",children:Object(w.jsx)(A,{tiles:this.state.tiles,characters:this.state.characters,onClick:this.handleClickItemTile})})]})]})})}},{key:"handleClickTile",value:function(t,e){if(this.state.characters[0].ap>0){if(1===this.distCellToCharacter(t,e)){this.state.characters[0].ap-=1;var s=this.state.characters[0].coords,a=s.x,r=s.y,i=this.state.characters;i[0].coords={x:t,y:e};var c=this.state.tiles;c[a][r].characters=[],c[t][e].characters.push(i[0]);var n=this.state.phase;this.setState({tiles:c,characters:i,phase:n})}}else alert("You are out of action points")}},{key:"handleClickSearch",value:function(){if(this.state.characters[0].ap>0){this.state.characters[0].ap-=1;for(var t=-1,e=0;e<this.state.characters[0].inventory.size;e++)if(this.state.characters[0].inventory.slots[e]===y[0]){t=e;break}if(-1!==t){var s=Math.floor(Math.random()*y.length),a=this.state.characters;a[0].inventory.slots[t]=y[s];var r=this.state.tiles,i=this.state.phase;this.setState({tiles:r,characters:a,phase:i})}else alert("Inventory is full")}else alert("You are out of action points")}},{key:"handleClickItemInventory",value:function(t){if(this.state.characters[0].inventory.slots[t].id!=y[0].id){var e=this.state.characters[0].coords.x,s=this.state.characters[0].coords.y,a=this.state.characters,r=this.state.tiles,i=this.state.phase;r[e][s].items.push(this.state.characters[0].inventory.slots[t]),a[0].inventory.slots[t]=y[0],this.setState({tiles:r,characters:a,phase:i})}}},{key:"handleClickItemTile",value:function(t){for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===y[0]){e=s;break}if(-1!==e){var a=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y,i=this.state.characters,c=this.state.tiles,n=this.state.phase;i[0].inventory.slots[e]=this.state.tiles[a][r].items[t],c[a][r].items.splice(t,1),this.setState({tiles:c,characters:i,phase:n})}}},{key:"distCellToCharacter",value:function(t,e){return Math.max(Math.abs(this.state.tiles[t][e].coords.x-this.state.characters[0].coords.x),Math.abs(this.state.tiles[t][e].coords.y-this.state.characters[0].coords.y))}}]),s}(r.a.Component);var L=function(){return Object(w.jsx)(F,{})},M=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(e){var s=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;s(t),a(t),r(t),i(t),c(t)}))};c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(L,{})}),document.getElementById("root")),M()},8:function(t,e,s){}},[[16,1,2]]]);
//# sourceMappingURL=main.ed0efcb8.chunk.js.map