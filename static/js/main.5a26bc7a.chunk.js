(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{21:function(e,t,i){},29:function(e,t,i){},36:function(e,t,i){"use strict";i.r(t);var r,n,s=i(0),c=i.n(s),a=i(7),o=i.n(a),l=(i(29),i(21),i(4)),d=i(15),h=i(16),u=h.a.button(r||(r=Object(d.a)(["\n  width: 9%;\n  height: 9%;\n\n  font-size: ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border: 1px solid white;\n  border-collapse: collapse;\n  border-radius: 5px;\n"])),(function(e){return e.characters.length,"8px"}),(function(e){return 0===e.characters.length?e.tiletype.color:"repeating-linear-gradient(45deg, white, white 10px, "+e.tiletype.color+" 10px,  "+e.tiletype.color+" 20px)"}),(function(e){return 0===e.characters.length?"black":"white"}),(function(e){return 0===e.characters.length?"normal":"bold"})),b=i(1),j=function(e){for(var t=e.tiles,i=e.onClick,r=[],n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++){var c=i.bind(undefined,s,n);r.push(Object(b.jsx)(u,{tiletype:t[s][n].type,characters:t[s][n].characters,onClick:c,children:0!==t[s][n].characters.length?"X":"("+s+","+n+")"},"Cell"+s+":"+n))}r.push(Object(b.jsx)("br",{},"LineBreak"+n))}return Object(b.jsx)("span",{className:"map",children:r})},p=5,m={x:5,y:5},x=100,f=4,O=[0,60,90,100,100,100,100,100,100,100,100],v=5,g=function(e){var t=e.phase,i=e.characters;return Object(b.jsxs)("span",{className:"statusbar",children:[Object(b.jsx)("b",{children:"Status bar"}),Object(b.jsx)("br",{}),"Turn: ",t.turn," (00:00:0",t.untilNextTurn,")",Object(b.jsx)("br",{}),"Action Points: ",i[0].ap," / ",f,Object(b.jsx)("br",{}),"Health Points: ",i[0].hp," / ",x,Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})},y=function(e){var t=e.onClick;return Object(b.jsxs)("span",{className:"actionbar",children:[Object(b.jsx)("b",{children:"Actions"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"action",type:"button",value:"Search",onClick:t})]})},A=i(5),w=function e(t,i,r){Object(A.a)(this,e),this.id=void 0,this.name=void 0,this.frequency=void 0,this.id=t,this.name=i,this.frequency=r},I=[new w(0," ",-1),new w(1,"Log",0),new w(2,"Plank",1),new w(3,"Iron Ore",2),new w(4,"Iron Bar",1),new w(5,"Iron Sheet",2),new w(6,"Broken Circuit Board",1),new w(7,"Electronic Component",2),new w(8,"Transistor Radio",999)],C=i(19),k=function(e){var t=e.alertText,i=e.isVisible;return Object(b.jsx)("span",{className:"alertbar",children:Object(b.jsxs)(C.a,{show:i,variant:t.variant,children:[Object(b.jsx)(C.a.Heading,{children:t.header}),t.body]},"mainAlert")})},N=function e(t,i,r){Object(A.a)(this,e),this.header=void 0,this.body=void 0,this.variant=void 0,this.header=t,this.body=i,this.variant=r};!function(e){e.WARNING="warning",e.PRIMARY="primary"}(n||(n={}));var P,D={START:new N("Your starship was heavily damaged during an orbital fight...","Pilots managed to perform an emergency landing on the planet below. The vessel is irreversibly damaged. Fellow crew is dead. Endless jungle covering the entire surface.",n.PRIMARY),OUT_OF_AP:new N("Out of Action Points","You are too tired to perform this action and need to chill for a  while. AP recover with time. Action Points recover gradually with time.",n.WARNING)},T=[new function e(t,i){Object(A.a)(this,e),this.id=void 0,this.name=void 0,this.items=void 0,this.id=t,this.name=i,this.items=[]}(0,"Engineering Bay")],M=function e(t,i,r){Object(A.a)(this,e),this.id=void 0,this.name=void 0,this.color=void 0,this.id=t,this.name=i,this.color=r},E=[new M(0,"Forest","#32a871"),new M(1,"Starship","#929da6"),new M(2,"Impact Cleaning","#76a693")],R=function e(t,i,r){Object(A.a)(this,e),this.type=void 0,this.coords=void 0,this.characters=void 0,this.items=void 0,this.type=t,this.coords={x:i,y:r},this.characters=[],this.items=[]},S=function e(){Object(A.a)(this,e),this.turn=void 0,this.untilNextTurn=void 0,this.isNight=void 0,this.alertActive=void 0,this.untilAlertDismissed=void 0,this.turn=1,this.untilNextTurn=p,this.isNight=!1,this.untilAlertDismissed=0,this.alertActive=D.START,this.untilAlertDismissed=1200},F=function e(t,i,r,n,s,c){Object(A.a)(this,e),this.id=void 0,this.hp=void 0,this.ap=void 0,this.coords=void 0,this.items=void 0,this.itemsMax=void 0,this.id=t,this.hp=i,this.ap=r,this.coords={x:n,y:s},this.itemsMax=c,this.items=[]},B=function(e){for(var t=[],i=0;i<I.length;i++)I[i].frequency===e&&t.push(I[i]);return t},_=i(3),H=h.a.input(P||(P=Object(d.a)(["\n  width: 80%;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: rgb(148, 148, 184);\n  border-radius: 5px;\n  border: 2px solid rgb(209, 209, 224);\n  color: white;\n  text-align: center;\n  font-size: 14px;\n"]))),L=i(8),Y=function(e){var t=e.characters,i=e.onClick;return Object(b.jsx)(L.c,{droppableId:"items-inventory",isDropDisabled:t[0].items.length>=t[0].itemsMax,children:function(e){return Object(b.jsxs)("ul",Object(_.a)(Object(_.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t[0].items.map((function(e,t){return Object(b.jsx)(L.b,{draggableId:"item-inventory-"+t,index:t,children:function(r){return Object(b.jsx)("li",Object(_.a)(Object(_.a)(Object(_.a)({ref:r.innerRef},r.draggableProps),r.dragHandleProps),{},{children:Object(b.jsx)(H,{type:"submit",value:e.name,onClick:function(){return i(t)}})}))}},t)})),e.placeholder]}))}})},q=function(e){var t=e.characters,i=e.onClick,r=e.onDragEnd;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:["Inventory (",t[0].items.length,"/",t[0].itemsMax,")"]}),Object(b.jsx)("br",{}),Object(b.jsx)(Y,{characters:t,onClick:i,onDragEnd:r})]})},U=function(e){var t=e.characters,i=e.tiles,r=e.onClick,n=t[0].coords.x,s=t[0].coords.y;return Object(b.jsx)(L.c,{droppableId:"items-cell",children:function(e){return Object(b.jsxs)("ul",Object(_.a)(Object(_.a)({},e.droppableProps),{},{ref:e.innerRef,children:[i[n][s].items.map((function(e,t){return Object(b.jsx)(L.b,{draggableId:"item-cell-"+t,index:t,children:function(e){return Object(b.jsx)("li",Object(_.a)(Object(_.a)(Object(_.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(b.jsx)(H,{type:"submit",value:i[n][s].items[t].name,onClick:function(){return r(t)}})}))}},t)})),e.placeholder]}))}})},z=function(e){var t=e.characters,i=e.tiles,r=e.onClick,n=e.onDragEnd,s=t[0].coords.x,c=t[0].coords.y;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:[i[s][c].type.name," (",s,", ",c,")"]}),Object(b.jsx)("br",{}),Object(b.jsx)(U,{characters:t,tiles:i,onClick:r,onDragEnd:n})]})},G=function(e){var t=e.construction,i=e.onClick;return Object(b.jsx)(L.c,{droppableId:"items-craft",children:function(e){return Object(b.jsxs)("ul",Object(_.a)(Object(_.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t.items.map((function(e,t){return Object(b.jsx)(L.b,{draggableId:"item-craft-"+t,index:t,children:function(r){return Object(b.jsx)("li",Object(_.a)(Object(_.a)(Object(_.a)({ref:r.innerRef},r.draggableProps),r.dragHandleProps),{},{children:Object(b.jsx)(H,{type:"submit",value:e.name,onClick:function(){return i(t)}})}))}},t)})),e.placeholder]}))}})},J=function(e){var t=e.construction,i=e.onClick,r=e.onDragEnd;return Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Engineering Bay"}),Object(b.jsx)("br",{}),Object(b.jsx)(G,{construction:t,onClick:i,onDragEnd:r})]})},V=function(e){var t=e.characters,i=e.tiles,r=e.construction,n=e.onClickInventory,s=e.onClickCell,c=e.onDragEnd;return Object(b.jsx)(L.a,{onDragEnd:c,children:Object(b.jsx)("table",{className:"itembar",children:Object(b.jsx)("tbody",{children:Object(b.jsxs)("tr",{className:"itemlists",children:[Object(b.jsx)("td",{className:"itemlist",children:Object(b.jsx)(q,{characters:t,onClick:n,onDragEnd:c})}),Object(b.jsx)("td",{className:"itemlist",children:Object(b.jsx)(z,{characters:t,tiles:i,onClick:s,onDragEnd:c})}),Object(b.jsx)("td",{className:"itemlist",children:Object(b.jsx)(J,{construction:r,onClick:s,onDragEnd:c})})]})})})})},W=function(){var e=function(){for(var e=new Array(11),t=0;t<e.length;t++){e[t]=new Array(11);for(var i=0;i<e[t].length;i++)e[t][i]=new R(E[0],t,i)}e[5][5].type=E[1],e[4][4].type=E[2],e[5][4].type=E[2],e[6][4].type=E[2],e[4][5].type=E[2],e[6][5].type=E[2],e[4][6].type=E[2],e[5][6].type=E[2],e[6][6].type=E[2],e[5][5].characters.push(new F(1,x,f,m.x,m.y,6));var r=[];r.push(new F(1,x,f,m.x,m.y,6));var n=new S,s=[],c=T[0];return s.push(c),{characters:r,phase:n,tiles:e,constructions:s}}(),t=Object(s.useState)(e.characters),i=Object(l.a)(t,2),r=i[0],n=i[1],c=Object(s.useState)(e.phase),a=Object(l.a)(c,2),o=a[0],d=a[1],h=Object(s.useState)(e.tiles),u=Object(l.a)(h,2),A=u[0],w=u[1],C=Object(s.useState)(e.constructions),N=Object(l.a)(C,2),P=N[0],M=N[1],_=function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),i=(t[0],t[1]);return function(){return i((function(e){return e+1}))}}(),H=function(){var e=r,t=o;o.untilNextTurn>1?t.untilNextTurn-=1:(t.turn+=1,t.untilNextTurn=p,e[0].ap<4&&(e[0].ap+=1)),t.untilAlertDismissed>0&&(t.untilAlertDismissed-=1),n(e),d(t),_()},L=function(e){var t=o;t.alertActive=e,t.untilAlertDismissed=v,d(t),_()},Y=function(e,t){return Math.max(Math.abs(A[e][t].coords.x-r[0].coords.x),Math.abs(A[e][t].coords.y-r[0].coords.y))};return Object(s.useEffect)((function(){setInterval(H,1e3)}),[]),Object(b.jsxs)("div",{className:"ui",children:[Object(b.jsxs)("div",{className:"ui-row1",children:[Object(b.jsx)(j,{tiles:A,onClick:function(e,t){if(r[0].ap>0){if(1===Y(e,t)){var i=r;i[0].ap-=1;var s=r[0].coords.x,c=r[0].coords.y;i[0].coords={x:e,y:t};var a=A;a[s][c].characters=[],a[e][t].characters.push(i[0]),n(i),w(a)}}else L(D.OUT_OF_AP);_()}}),Object(b.jsx)(V,{characters:r,tiles:A,construction:P[0],onClickInventory:function(e){var t=r[0].coords.x,i=r[0].coords.y,s=r,c=A;c[t][i].items.push(r[0].items[e]),s[0].items.splice(e,1),n(s),w(c),_()},onClickCell:function(e){if(r[0].items.length<=r[0].itemsMax-1){var t=r[0].coords.x,i=r[0].coords.y,s=r,c=A;s[0].items.push(A[t][i].items[e]),c[t][i].items.splice(e,1),n(s),w(c),_()}},onDragEnd:function(e){if(e.destination){var t=r[0].coords.x,i=r[0].coords.y,s=r,c=A,a=P;if(e.source.droppableId===e.destination.droppableId){if("items-inventory"===e.source.droppableId){var o=Array.from(r[0].items),d=o.splice(e.source.index,1),h=Object(l.a)(d,1)[0];o.splice(e.destination.index,0,h),s[0].items=o}if("items-cell"===e.source.droppableId){var u=Array.from(A[t][i].items),b=u.splice(e.source.index,1),j=Object(l.a)(b,1)[0];u.splice(e.destination.index,0,j),c[t][i].items=u}if("items-craft"===e.source.droppableId){var p=Array.from(P[0].items),m=p.splice(e.source.index,1),x=Object(l.a)(m,1)[0];p.splice(e.destination.index,0,x),a[0].items=p}}if(e.source.droppableId!==e.destination.droppableId){var f=Array(0),O=Array(0);if("items-inventory"===e.source.droppableId&&"items-cell"===e.destination.droppableId){f=Array.from(r[0].items),O=Array.from(A[t][i].items);var v=f.splice(e.source.index,1),g=Object(l.a)(v,1)[0];O.splice(e.destination.index,0,g),s[0].items=f,c[t][i].items=O}else if("items-cell"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&r[0].items.length<=r[0].itemsMax-1){f=Array.from(A[t][i].items),O=Array.from(r[0].items);var y=f.splice(e.source.index,1),I=Object(l.a)(y,1)[0];O.splice(e.destination.index,0,I),c[t][i].items=f,s[0].items=O}if("items-inventory"===e.source.droppableId&&"items-craft"===e.destination.droppableId){f=Array.from(r[0].items),O=Array.from(P[0].items);var C=f.splice(e.source.index,1),k=Object(l.a)(C,1)[0];O.splice(e.destination.index,0,k),s[0].items=f,a[0].items=O}else if("items-craft"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&r[0].items.length<=r[0].itemsMax-1){f=Array.from(P[0].items),O=Array.from(r[0].items);var N=f.splice(e.source.index,1),D=Object(l.a)(N,1)[0];O.splice(e.destination.index,0,D),a[0].items=f,s[0].items=O}if("items-cell"===e.source.droppableId&&"items-craft"===e.destination.droppableId){f=Array.from(A[t][i].items),O=Array.from(P[0].items);var T=f.splice(e.source.index,1),E=Object(l.a)(T,1)[0];O.splice(e.destination.index,0,E),c[t][i].items=f,a[0].items=O}else if("items-craft"===e.source.droppableId&&"items-cell"===e.destination.droppableId){f=Array.from(P[0].items),O=Array.from(A[t][i].items);var R=f.splice(e.source.index,1),S=Object(l.a)(R,1)[0];O.splice(e.destination.index,0,S),a[0].items=f,c[t][i].items=O}}n(s),w(c),M(a),_()}}})]}),Object(b.jsxs)("div",{className:"ui-row2",children:[Object(b.jsx)(g,{phase:o,characters:r}),Object(b.jsx)(y,{onClick:function(){if(r[0].ap>0){var e=r,t=A;e[0].ap-=1;var i=Math.floor(Math.random()*I.length);if(r[0].items.length<=r[0].itemsMax-1)e[0].items.push(function(){for(var e=100*Math.random(),t=0;t<O.length-1;t++)if(e>O[t]&&e<O[t+1]){var i=B(t);return i[Math.floor(Math.random()*i.length)]}return I[0]}()),n(e);else{var s=r[0].coords.x,c=r[0].coords.y;t[s][c].items.push(I[i]),n(e),w(t)}}else L(D.OUT_OF_AP);_()}})]}),Object(b.jsx)("div",{className:"ui-row3",children:Object(b.jsx)(k,{alertText:o.alertActive,isVisible:o.untilAlertDismissed>0})})]})},X=(i(35),function(){return Object(b.jsx)(W,{})}),K=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,38)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;i(e),r(e),n(e),s(e),c(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(X,{})}),document.getElementById("root")),K()}},[[36,1,2]]]);
//# sourceMappingURL=main.5a26bc7a.chunk.js.map