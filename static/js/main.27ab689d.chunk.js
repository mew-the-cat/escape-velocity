(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{14:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var a=s(1),r=s.n(a),i=s(9),c=s.n(i),n=(s(14),s(8),s(2)),h=s(4),o=s(3),l=s(6),p=s(5),u=s(0),j=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){var a;Object(n.a)(this,s),a=e.call(this,t);for(var r=new Array(11),i=0;i<r.length;i++){r[i]=new Array(11);for(var c=0;c<r[i].length;c++)r[i][c]=new k(i,c)}r[5][5].characters.push(new f(A.PLAYER_HP_MAX,A.PLAYER_AP_MAX,A.POSITION_START.x,A.POSITION_START.y));var h=[];h.push(new f(A.PLAYER_HP_MAX,A.PLAYER_AP_MAX,A.POSITION_START.x,A.POSITION_START.y));var l=new m;return a.state={tiles:r,characters:h,phase:l},a.handleClickTile=a.handleClickTile.bind(Object(o.a)(a)),a.handleClickSearch=a.handleClickSearch.bind(Object(o.a)(a)),a.handleClickItemInventory=a.handleClickItemInventory.bind(Object(o.a)(a)),a.handleClickItemTile=a.handleClickItemTile.bind(Object(o.a)(a)),setInterval(a.gameLoop.bind(Object(o.a)(a)),1e3),a}return Object(h.a)(s,[{key:"gameLoop",value:function(){if(this.state.phase.untilTextTurn>1){var t=this.state.tiles,e=this.state.characters;(s=this.state.phase).untilTextTurn-=1}else{var s;t=this.state.tiles;(e=this.state.characters)[0].ap<4&&(e[0].ap+=1),(s=this.state.phase).turn+=1,s.untilTextTurn=5}this.setState({tiles:t,characters:e,phase:s})}},{key:"render",value:function(){return Object(u.jsx)("table",{children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{rowSpan:"3",children:Object(u.jsx)(b,{tiles:this.state.tiles,onClick:this.handleClickTile})}),Object(u.jsx)("td",{colSpan:"2",className:"aux-window",children:Object(u.jsx)(d,{phase:this.state.phase,characters:this.state.characters})})]}),Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:"2",className:"aux-window",children:Object(u.jsx)(O,{onClick:this.handleClickSearch})})}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"aux-window",children:Object(u.jsx)(v,{characters:this.state.characters,onClick:this.handleClickItemInventory})}),Object(u.jsx)("td",{className:"aux-window",children:Object(u.jsx)(x,{tiles:this.state.tiles,characters:this.state.characters,onClick:this.handleClickItemTile})})]})]})})}},{key:"handleClickTile",value:function(t,e){if(this.state.characters[0].ap>0){if(1===this.distCellToCharacter(t,e)){this.state.characters[0].ap-=1;var s=this.state.characters[0].coords,a=s.x,r=s.y,i=this.state.characters;i[0].coords={x:t,y:e};var c=this.state.tiles;c[a][r].characters=[],c[t][e].characters.push(i[0]);var n=this.state.phase;this.setState({tiles:c,characters:i,phase:n})}}else alert("You are out of action points")}},{key:"handleClickSearch",value:function(){if(this.state.characters[0].ap>0){this.state.characters[0].ap-=1;for(var t=-1,e=0;e<this.state.characters[0].inventory.size;e++)if(this.state.characters[0].inventory.slots[e]===I[0]){t=e;break}if(-1!==t){var s=Math.floor(Math.random()*I.length),a=this.state.characters;a[0].inventory.slots[t]=I[s];var r=this.state.tiles,i=this.state.phase;this.setState({tiles:r,characters:a,phase:i})}else alert("Inventory is full")}else alert("You are out of action points")}},{key:"handleClickItemInventory",value:function(t){if(this.state.characters[0].inventory.slots[t].id!=I[0].id){var e=this.state.characters[0].coords.x,s=this.state.characters[0].coords.y,a=this.state.characters,r=this.state.tiles,i=this.state.phase;r[e][s].items.push(this.state.characters[0].inventory.slots[t]),a[0].inventory.slots[t]=I[0],this.setState({tiles:r,characters:a,phase:i})}}},{key:"handleClickItemTile",value:function(t){for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===I[0]){e=s;break}if(-1!==e){var a=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y,i=this.state.characters,c=this.state.tiles,n=this.state.phase;i[0].inventory.slots[e]=this.state.tiles[a][r].items[t],c[a][r].items.splice(t,1),this.setState({tiles:c,characters:i,phase:n})}}},{key:"distCellToCharacter",value:function(t,e){return Math.max(Math.abs(this.state.tiles[t][e].coords.x-this.state.characters[0].coords.x),Math.abs(this.state.tiles[t][e].coords.y-this.state.characters[0].coords.y))}}]),s}(r.a.Component),b=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){return Object(n.a)(this,s),e.call(this,t)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=[],e=0;e<this.props.tiles.length;e++){for(var s=0;s<this.props.tiles[e].length;s++){var a=this.props.onClick.bind(this,s,e);t.push(Object(u.jsx)(y,{coords:{x:s,y:e},characters:this.props.tiles[s][e].characters,onClick:a},"Cell"+s+":"+e))}t.push(Object(u.jsx)("br",{},"LineBreak"+e))}return t}}]),s}(r.a.Component),d=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Status bar"}),Object(u.jsx)("br",{}),"Turn: ",this.props.phase.turn," (00:00:0",this.props.phase.untilTextTurn,")",Object(u.jsx)("br",{}),"Action points: ",this.props.characters[0].ap," / ",A.PLAYER_AP_MAX,Object(u.jsx)("br",{}),"Health points: ",this.props.characters[0].hp," / ",A.PLAYER_HP_MAX]})}}]),s}(r.a.Component),O=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Actions"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{className:"action",type:"button",value:"Search",onClick:this.props.onClick})]})}}]),s}(r.a.Component),v=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=new Array(this.props.characters[0].inventory.size),e=0;e<t.length;e++){var s=this.props.onClick.bind(this,e);t[e]=Object(u.jsx)("div",{children:Object(u.jsx)("input",{className:"item",type:"submit",value:this.props.characters[0].inventory.slots[e].name,onClick:s},"ItemInventoryInput"+e)},"ItemInventoryDiv"+e)}return Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Inventory"}),Object(u.jsx)("br",{}),t]})}}]),s}(r.a.Component),x=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){for(var t=this.props.characters[0].coords.x,e=this.props.characters[0].coords.y,s=new Array(this.props.tiles[t][e].items),a=0;a<this.props.tiles[t][e].items.length;a++){var r=this.props.onClick.bind(this,a);s[a]=Object(u.jsx)("div",{children:Object(u.jsx)("input",{className:"item",type:"submit",value:this.props.tiles[t][e].items[a].name,onClick:r},"ItemTileInput"+a)},"ItemTileDiv"+a)}return Object(u.jsxs)("div",{children:[Object(u.jsxs)("b",{children:["Tile (",this.props.characters[0].coords.x,", ",this.props.characters[0].coords.y,")"]}),Object(u.jsx)("br",{}),s]})}}]),s}(r.a.Component),y=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){return Object(n.a)(this,s),e.call(this,t)}return Object(h.a)(s,[{key:"render",value:function(){return 0===this.props.characters.length?Object(u.jsx)("button",{className:"cell",onClick:this.props.onClick,children:"("+this.props.coords.x+", "+this.props.coords.y+")"}):Object(u.jsx)("button",{className:"cell-player",onClick:this.props.onClick,children:"X"})}}]),s}(r.a.Component),f=function t(e,s,a,r){Object(n.a)(this,t),this.hp=e,this.ap=s,this.coords={x:a,y:r},this.inventory=new T(6)},k=function t(e,s){Object(n.a)(this,t),this.coords={x:e,y:s},this.characters=[],this.items=[]},m=function t(){Object(n.a)(this,t),this.untilTextTurn=A.DURATION_TURN,this.turn=1,this.isNight=!1},C=function t(e,s){Object(n.a)(this,t),this.id=e,this.name=s},T=function t(e){Object(n.a)(this,t),this.size=e,this.slots=new Array(e);for(var s=0;s<this.slots.length;s++)this.slots[s]=I[0]},I=[new C(0," "),new C(1,"Log"),new C(2,"Iron Ore"),new C(3,"Stone"),new C(4,"Flint"),new C(5,"Stick"),new C(6,"Jade"),new C(7,"Fruits"),new C(8,"Nuts"),new C(9,"Broken metal plates"),new C(10,"Broken coil")],A={DURATION_TURN:5,POSITION_START:{x:5,y:5},INVENTORY_SIZE:6,PLAYER_HP_MAX:100,PLAYER_AP_MAX:4},w=j;var S=function(){return Object(u.jsx)(w,{})},_=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(e){var s=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;s(t),a(t),r(t),i(t),c(t)}))};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),_()},8:function(t,e,s){}},[[16,1,2]]]);
//# sourceMappingURL=main.27ab689d.chunk.js.map