(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{13:function(t,e,s){},22:function(t,e,s){},26:function(t,e,s){"use strict";s.r(e);var a,r,n=s(1),i=s.n(n),c=s(14),h=s.n(c),o=(s(22),s(13),s(2)),l=s(3),p=s(6),u=s(5),j=s(4),b=5,d={x:5,y:5},O=100,v=4,y=[0,60,90,100,100,100,100,100,100,100,100],x=function t(){Object(o.a)(this,t),this.untilTextTurn=b,this.turn=1,this.isNight=!1},f=function t(e,s,a){Object(o.a)(this,t),this.id=e,this.name=s,this.frequency=a},m=[new f(0," ",-1),new f(1,"Log",0),new f(2,"Plank",1),new f(3,"Iron Ore",2),new f(4,"Iron Bar",1),new f(5,"Iron Sheet",2),new f(6,"Broken Circuit Board",1),new f(7,"Electronic Component",2),new f(8,"Transistor Radio",999)],k=function(t){for(var e=[],s=0;s<m.length;s++)m[s].frequency===t&&e.push(m[s]);return e},C=function t(e){Object(o.a)(this,t),this.size=e,this.slots=new Array(e);for(var s=0;s<this.slots.length;s++)this.slots[s]=m[0]},w=function t(e,s,a,r){Object(o.a)(this,t),this.hp=e,this.ap=s,this.coords={x:a,y:r},this.inventory=new C(6)},g=function t(e,s,a){Object(o.a)(this,t),this.type=e,this.coords={x:s,y:a},this.characters=[],this.items=[]},I=s(7),T=s(8),S=T.a.button(a||(a=Object(I.a)(["\n  width: 50px;\n  height: 50px;\n  font-size: ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border: 1px solid white;\n  border-collapse: collapse;\n"])),(function(t){return t.characters.length,"8px"}),(function(t){return 0===t.characters.length?t.type.color:"repeating-linear-gradient(45deg, white, white 10px, "+t.type.color+" 10px,  "+t.type.color+" 20px)"}),(function(t){return 0===t.characters.length?"black":"white"}),(function(t){return 0===t.characters.length?"normal":"bold"})),M=s(0),N=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=[],e=0;e<this.props.tiles.length;e++){for(var s=0;s<this.props.tiles[e].length;s++){var a=this.props.onClick.bind(this,s,e);t.push(Object(M.jsx)(S,{coords:{x:s,y:e},type:this.props.tiles[s][e].type,characters:this.props.tiles[s][e].characters,onClick:a,children:0!==this.props.tiles[s][e].characters.length?"X":"("+s+","+e+")"},"Cell"+s+":"+e))}t.push(Object(M.jsx)("br",{},"LineBreak"+e))}return t}}]),s}(i.a.Component),A=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(M.jsxs)("div",{children:[Object(M.jsx)("b",{children:"Status bar"}),Object(M.jsx)("br",{}),"Turn: ",this.props.phase.turn," (00:00:0",this.props.phase.untilTextTurn,")",Object(M.jsx)("br",{}),"Action points: ",this.props.characters[0].ap," / ",v,Object(M.jsx)("br",{}),"Health points: ",this.props.characters[0].hp," / ",O]})}}]),s}(i.a.Component),B=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(M.jsxs)("div",{children:[Object(M.jsx)("b",{children:"Actions"}),Object(M.jsx)("br",{}),Object(M.jsx)("input",{className:"action",type:"button",value:"Search",onClick:this.props.onClick})]})}}]),s}(i.a.Component),L=T.a.input(r||(r=Object(I.a)(["\n  width: 150px;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: rgb(225, 137, 155);\n"]))),z=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=new Array(this.props.characters[0].inventory.size),e=0;e<t.length;e++){var s=this.props.onClick.bind(this,e);t[e]=Object(M.jsx)(L,{type:"submit",value:this.props.characters[0].inventory.slots[e].name,onClick:s},"ItemInventoryInput"+e)}return Object(M.jsxs)("div",{children:[Object(M.jsx)("b",{children:"Inventory"}),Object(M.jsx)("br",{}),t]})}}]),s}(i.a.Component),F=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=this.props.characters[0].coords.x,e=this.props.characters[0].coords.y,s=new Array(this.props.tiles[t][e].items),a=0;a<this.props.tiles[t][e].items.length;a++){var r=this.props.onClick.bind(this,a);s[a]=Object(M.jsx)(L,{className:"item",type:"submit",value:this.props.tiles[t][e].items[a].name,onClick:r},"ItemTileInput"+a)}return Object(M.jsxs)("div",{children:[Object(M.jsxs)("b",{children:[this.props.tiles[t][e].type.name," (",t,", ",e,")"]}),Object(M.jsx)("br",{}),Object(M.jsx)("div",{class:"item-panel",children:s})]})}}]),s}(i.a.Component),P=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(M.jsxs)("div",{children:[Object(M.jsx)("b",{children:"Craft"}),Object(M.jsx)("br",{})]})}}]),s}(i.a.Component),q=function t(e,s,a){Object(o.a)(this,t),this.id=e,this.name=s,this.color=a},D=[new q(0,"Forest","#32a871"),new q(1,"Starship","#929da6"),new q(2,"Impact Cleaning","#76a693")],E=function(t){Object(u.a)(s,t);var e=Object(j.a)(s);function s(t){var a;Object(o.a)(this,s),a=e.call(this,t);for(var r=new Array(11),n=0;n<r.length;n++){r[n]=new Array(11);for(var i=0;i<r[n].length;i++)r[n][i]=new g(D[0],n,i)}r[5][5].characters.push(new w(O,v,d.x,d.y)),r[5][5].type=D[1],r[4][4].type=D[2],r[5][4].type=D[2],r[6][4].type=D[2],r[4][5].type=D[2],r[6][5].type=D[2],r[4][6].type=D[2],r[5][6].type=D[2],r[6][6].type=D[2];var c=[];c.push(new w(O,v,d.x,d.y));var h=new x;return a.state={tiles:r,characters:c,phase:h},a.handleClickTile=a.handleClickTile.bind(Object(p.a)(a)),a.handleClickSearch=a.handleClickSearch.bind(Object(p.a)(a)),a.handleClickItemInventory=a.handleClickItemInventory.bind(Object(p.a)(a)),a.handleClickItemTile=a.handleClickItemTile.bind(Object(p.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){setInterval(this.gameLoop.bind(this),1e3)}},{key:"gameLoop",value:function(){if(this.state.phase.untilTextTurn>1){var t=this.state.phase;t.untilTextTurn-=1,this.setState(t)}else{var e=this.state.phase;e.turn+=1,e.untilTextTurn=b;var s=this.state.characters;s[0].ap<4&&(s[0].ap+=1),this.setState(s),this.setState(e)}}},{key:"render",value:function(){return Object(M.jsx)("table",{children:Object(M.jsxs)("tbody",{children:[Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{rowSpan:"3",children:Object(M.jsx)(N,{tiles:this.state.tiles,onClick:this.handleClickTile})}),Object(M.jsx)("td",{colSpan:"3",className:"aux-window",children:Object(M.jsx)(A,{phase:this.state.phase,characters:this.state.characters})})]}),Object(M.jsx)("tr",{children:Object(M.jsx)("td",{colSpan:"3",className:"aux-window",children:Object(M.jsx)(B,{onClick:this.handleClickSearch})})}),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{className:"aux-window",children:Object(M.jsx)(z,{characters:this.state.characters,onClick:this.handleClickItemInventory})}),Object(M.jsx)("td",{className:"aux-window",children:Object(M.jsx)(F,{tiles:this.state.tiles,characters:this.state.characters,onClick:this.handleClickItemTile})}),Object(M.jsx)("td",{className:"aux-window",children:Object(M.jsx)(P,{})})]})]})})}},{key:"handleClickTile",value:function(t,e){if(this.state.characters[0].ap>0){if(1===this.distCellToCharacter(t,e)){var s=this.state.characters;s[0].ap-=1;var a=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y;s[0].coords={x:t,y:e};var n=this.state.tiles;n[a][r].characters=[],n[t][e].characters.push(s[0]),this.setState(s),this.setState(n)}}else alert("You are out of action points")}},{key:"handleClickSearch",value:function(){if(this.state.characters[0].ap>0){var t=this.state.characters;t[0].ap-=1;for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===m[0]){e=s;break}var a=Math.floor(Math.random()*m.length);if(-1!==e)t[0].inventory.slots[e]=function(){for(var t=100*Math.random(),e=0;e<y.length-1;e++)if(t>y[e]&&t<y[e+1]){var s=k(e),a=s[Math.floor(Math.random()*s.length)];return console.log(t+"    "+e+"    "+a),a}}(),this.setState(t);else{var r=this.state.tiles,n=this.state.characters[0].coords.x,i=this.state.characters[0].coords.y;r[n][i].items.push(m[a]),this.setState(r)}}else alert("You are out of action points")}},{key:"handleClickItemInventory",value:function(t){if(this.state.characters[0].inventory.slots[t].id!==m[0].id){var e=this.state.characters[0].coords.x,s=this.state.characters[0].coords.y,a=this.state.characters,r=this.state.tiles;r[e][s].items.push(this.state.characters[0].inventory.slots[t]),a[0].inventory.slots[t]=m[0],this.setState(a),this.setState(r)}}},{key:"handleClickItemTile",value:function(t){for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===m[0]){e=s;break}if(-1!==e){var a=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y,n=this.state.characters,i=this.state.tiles;n[0].inventory.slots[e]=this.state.tiles[a][r].items[t],i[a][r].items.splice(t,1),this.setState(n),this.setState(i)}}},{key:"distCellToCharacter",value:function(t,e){return Math.max(Math.abs(this.state.tiles[t][e].coords.x-this.state.characters[0].coords.x),Math.abs(this.state.tiles[t][e].coords.y-this.state.characters[0].coords.y))}}]),s}(i.a.Component);var J=function(){return Object(M.jsx)(E,{})},Y=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,27)).then((function(e){var s=e.getCLS,a=e.getFID,r=e.getFCP,n=e.getLCP,i=e.getTTFB;s(t),a(t),r(t),n(t),i(t)}))};h.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(J,{})}),document.getElementById("root")),Y()}},[[26,1,2]]]);
//# sourceMappingURL=main.13eb2486.chunk.js.map