(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var i,r,s,c=n(0),a=n.n(c),o=n(8),l=n.n(o),d=(n(32),n(24),n(5)),u=n(6),b=n(11),h=n(12),j=h.a.button(i||(i=Object(b.a)(["\n  width: 9%;\n  height: 9%;\n\n  font-size: ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border: 1px solid white;\n  border-collapse: collapse;\n  border-radius: 5px;\n"])),(function(e){return e.characters.length,"8px"}),(function(e){return 0===e.characters.length?e.tiletype.color:"repeating-linear-gradient(45deg, white, white 10px, "+e.tiletype.color+" 10px,  "+e.tiletype.color+" 20px)"}),(function(e){return 0===e.characters.length?"black":"white"}),(function(e){return 0===e.characters.length?"normal":"bold"})),O=n(1),m=function(e){for(var t=e.tiles,n=e.onClick,i=[],r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++){var c=n.bind(undefined,s,r);i.push(Object(O.jsx)(j,{tiletype:t[s][r].type,characters:t[s][r].characters,onClick:c,children:0!==t[s][r].characters.length?"X":"("+s+","+r+")"},"Cell"+s+":"+r))}i.push(Object(O.jsx)("br",{},"LineBreak"+r))}return Object(O.jsx)("span",{className:"map",children:i})},p=3,x={x:5,y:5},f=100,v=20,g=5,C=function(e){var t=e.phase,n=e.characters;return Object(O.jsxs)("span",{className:"statusbar",children:[Object(O.jsx)("b",{children:"Status bar"}),Object(O.jsx)("br",{}),"Turn: ",t.turn," (00:00:0",t.untilNextTurn,")",Object(O.jsx)("br",{}),"Action Points: ",n[0].ap," / ",v,Object(O.jsx)("br",{}),"Health Points: ",n[0].hp," / ",f,Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]})},y=h.a.input(r||(r=Object(b.a)(["\n  width: 150px;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: rgb(102, 217, 255);\n  border-radius: 5px;\n  border: 2px solid rgb(204, 242, 255);\n  color: white;\n  font-size: 14px;\n"]))),I=function(e){var t=e.onClickSearch,n=e.onClickCraft;return Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Actions"}),Object(O.jsx)("br",{}),Object(O.jsx)(y,{type:"button",value:"Search",onClick:t}),Object(O.jsx)(y,{type:"button",value:"Craft",onClick:n})]})},N=n(22),A=function(e){var t=e.alertText,n=e.isVisible;return Object(O.jsx)("span",{className:"alertbar",children:Object(O.jsxs)(N.a,{show:n,variant:t.variant,children:[Object(O.jsx)(N.a.Heading,{children:t.header}),t.body]},"mainAlert")})},E=n(4),T=function e(t,n,i){Object(E.a)(this,e),this.header=void 0,this.body=void 0,this.variant=void 0,this.header=t,this.body=n,this.variant=i};!function(e){e.WARNING="warning",e.PRIMARY="primary",e.SUCCESS="success"}(s||(s={}));var M,w={START:new T("Your starship was heavily damaged during an orbital fight...","Pilots managed to perform an emergency landing on the planet below. The vessel is irreversibly damaged. Fellow crew is dead. Endless jungle covering the entire surface.",s.PRIMARY),OUT_OF_AP:new T("Out of Action Points","You are too tired to perform this action and need to chill for a  while. AP recover with time. Action Points recover gradually with time.",s.WARNING),CRAFT_NO_COMBINATION:new T("Engeneering Attempt Failed","You tried to tinker around with these items with no palpable success. It looks like you can't combine them into anything more or less interesting.",s.WARNING),CRAFT_NO_ITEMS:new T("Not Enough Items","Load at least 2 items in the Engineering Bay in order to process them.",s.WARNING),CRAFT_SUCCESS:new T("Engeneering Attempt Successful","You managed to process materials into a structurally more complex item.",s.SUCCESS)},U=[new function e(t,n){Object(E.a)(this,e),this.id=void 0,this.name=void 0,this.items=void 0,this.id=t,this.name=n,this.items=[]}(0,"Engineering Bay")],S=function e(t,n,i){Object(E.a)(this,e),this.id=void 0,this.name=void 0,this.color=void 0,this.id=t,this.name=n,this.color=i},R=[new S(0,"Forest","#32a871"),new S(1,"Starship","#929da6"),new S(2,"Impact Cleaning","#76a693")],k=function e(t,n,i){Object(E.a)(this,e),this.type=void 0,this.coords=void 0,this.characters=void 0,this.items=void 0,this.type=t,this.coords={x:n,y:i},this.characters=[],this.items=[]},_=function e(){Object(E.a)(this,e),this.turn=void 0,this.untilNextTurn=void 0,this.isNight=void 0,this.turn=1,this.untilNextTurn=p-1,this.isNight=!1},P=function e(t,n,i,r,s,c){Object(E.a)(this,e),this.id=void 0,this.hp=void 0,this.ap=void 0,this.coords=void 0,this.items=void 0,this.itemsMax=void 0,this.id=t,this.hp=n,this.ap=i,this.coords={x:r,y:s},this.itemsMax=c,this.items=[]},B=function e(){Object(E.a)(this,e),this.alertActive=void 0,this.untilAlertDismissed=void 0,this.alertActive=w.START,this.untilAlertDismissed=600};!function(e){e.UBIQUITOUS="UBIQUITOUS",e.COMMON="COMMON",e.UNCOMMON="UNCOMMON",e.RARE="RARE",e.SCARCE="SCARCE",e.UNIQUE="UNIQUE"}(M||(M={}));var D,F,Q=function e(t,n,i){Object(E.a)(this,e),this.id=void 0,this.name=void 0,this.rarity=void 0,this.id=t,this.name=n,this.rarity=i},L=[new Q(0,"Log",M.UBIQUITOUS),new Q(1,"Plank",M.COMMON),new Q(2,"Wooden Beam",M.RARE),new Q(3,"Iron Ore",M.COMMON),new Q(4,"Iron Bar",M.UNCOMMON),new Q(5,"Iron Sheet",M.RARE),new Q(6,"Broken Circuit Board",M.UNCOMMON),new Q(7,"Electronic Plate",M.SCARCE),new Q(8,"Transistor Radio",M.UNIQUE),new Q(9,"Copper Ore",M.COMMON),new Q(10,"Copper Wire",M.SCARCE),new Q(11,"Antenna",M.UNIQUE)],H=function(){var e=W(Y());return e[Math.floor(Math.random()*e.length)]},W=function(e){for(var t=[],n=0;n<L.length;n++)L[n].rarity===e&&t.push(L[n]);return t},Y=function(){var e=100*Math.random();return e<=35?M.UBIQUITOUS:e>35&&e<=65?M.COMMON:e>65&&e<=85?M.UNCOMMON:e>85&&e<=95?M.RARE:M.SCARCE},z=n(3);!function(e){e.ITEM_UBIQUITOUS="rgb(206, 188, 160)",e.ITEM_COMMON="rgb(148, 148, 184)",e.ITEM_UNCOMMON="rgb(151, 184, 250)",e.ITEM_RARE="rgb(255, 181, 54)",e.ITEM_SCARCE="rgb(242, 114, 114)",e.ITEM_UNIQUE="rgb(227, 0, 91)",e.CONSTRUCTIONS_BUILT="rgb(92, 92, 92)",e.CONSTRUCTIONS_NOT_BUILT="rgb(188, 188, 188)"}(D||(D={}));var G,J=h.a.input(F||(F=Object(b.a)(["\n  width: 80%;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: ","\n    ","\n    ","\n    ","\n    ","\n    ",";\n  border: none;\n  border-radius: 5px;\n  color: white;\n  text-align: center;\n  font-size: 14px;\n"])),(function(e){return e.rarity===M.UBIQUITOUS&&D.ITEM_UBIQUITOUS}),(function(e){return e.rarity===M.COMMON&&D.ITEM_COMMON}),(function(e){return e.rarity===M.UNCOMMON&&D.ITEM_UNCOMMON}),(function(e){return e.rarity===M.RARE&&D.ITEM_RARE}),(function(e){return e.rarity===M.SCARCE&&D.ITEM_SCARCE}),(function(e){return e.rarity===M.UNIQUE&&D.ITEM_UNIQUE})),V=n(9),X=function(e){var t=e.characters,n=e.onClick;return Object(O.jsx)(V.c,{droppableId:"items-inventory",isDropDisabled:t[0].items.length>=t[0].itemsMax,children:function(e){return Object(O.jsxs)("ul",Object(z.a)(Object(z.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t[0].items.map((function(e,t){return Object(O.jsx)(V.b,{draggableId:"item-inventory-"+t,index:t,children:function(i){return Object(O.jsx)("li",Object(z.a)(Object(z.a)(Object(z.a)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{children:Object(O.jsx)(J,{type:"submit",value:e.name,rarity:e.rarity,onClick:function(){return n(t)}})}))}},t)})),e.placeholder]}))}})},q=function(e){var t=e.characters,n=e.onClick,i=e.onDragEnd;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("b",{children:["Inventory (",t[0].items.length,"/",t[0].itemsMax,")"]}),Object(O.jsx)("br",{}),Object(O.jsx)(X,{characters:t,onClick:n,onDragEnd:i})]})},K=function(e){var t=e.characters,n=e.tiles,i=e.onClick,r=t[0].coords.x,s=t[0].coords.y;return Object(O.jsx)(V.c,{droppableId:"items-cell",children:function(e){return Object(O.jsxs)("ul",Object(z.a)(Object(z.a)({},e.droppableProps),{},{ref:e.innerRef,children:[n[r][s].items.map((function(e,t){return Object(O.jsx)(V.b,{draggableId:"item-cell-"+t,index:t,children:function(e){return Object(O.jsx)("li",Object(z.a)(Object(z.a)(Object(z.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(O.jsx)(J,{type:"submit",value:n[r][s].items[t].name,rarity:n[r][s].items[t].rarity,onClick:function(){return i(t)}})}))}},t)})),e.placeholder]}))}})},Z=function(e){var t=e.characters,n=e.tiles,i=e.onClick,r=e.onDragEnd,s=t[0].coords.x,c=t[0].coords.y;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("b",{children:[n[s][c].type.name," (",s,", ",c,")"]}),Object(O.jsx)("br",{}),Object(O.jsx)(K,{characters:t,tiles:n,onClick:i,onDragEnd:r})]})},$=function(e){var t=e.construction,n=e.onClick;return Object(O.jsx)(V.c,{droppableId:"items-craft",children:function(e){return Object(O.jsxs)("ul",Object(z.a)(Object(z.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t.items.map((function(e,t){return Object(O.jsx)(V.b,{draggableId:"item-craft-"+t,index:t,children:function(i){return Object(O.jsx)("li",Object(z.a)(Object(z.a)(Object(z.a)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{children:Object(O.jsx)(J,{type:"submit",value:e.name,rarity:e.rarity,onClick:function(){return n(t)}})}))}},t)})),e.placeholder]}))}})},ee=function(e){var t=e.construction,n=e.onClick,i=e.onDragEnd;return Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Engineering Bay"}),Object(O.jsx)("br",{}),Object(O.jsx)($,{construction:t,onClick:n,onDragEnd:i})]})},te=function(e){var t=e.characters,n=e.tiles,i=e.construction,r=e.onClickInventory,s=e.onClickCell,c=e.onDragEnd,a=e.isInside;return Object(O.jsx)(V.a,{onDragEnd:c,children:Object(O.jsx)("table",{className:"itembar",children:Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{className:"itemlists",children:[Object(O.jsx)("td",{className:"itemlist",children:Object(O.jsx)(q,{characters:t,onClick:r,onDragEnd:c})}),Object(O.jsx)("td",{className:"itemlist",children:Object(O.jsx)(Z,{characters:t,tiles:n,onClick:s,onDragEnd:c})}),a&&Object(O.jsx)("td",{className:"itemlist",children:Object(O.jsx)(ee,{construction:i,onClick:s,onDragEnd:c})})]})})})})},ne=function e(t,n){Object(E.a)(this,e),this.itemCombination=[],this.itemResult=void 0,this.itemCombination=t,this.itemResult=n},ie=[new ne([L[0],L[0]],L[1]),new ne([L[1],L[1]],L[2]),new ne([L[3],L[3]],L[4]),new ne([L[4],L[4]],L[5]),new ne([L[6],L[6]],L[7]),new ne([L[7],L[7]],L[8]),new ne([L[9],L[9]],L[10]),new ne([L[10],L[10]],L[11])],re=h.a.div(G||(G=Object(b.a)(["\n  width: 100%;\n  height: 50px;\n  margin: 3px 3px 3px 3px;\n  margin-right: 0px;\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  color: ",";\n  text-align: center;\n  font-size: 14px;\n"])),(function(e){return e.amountConstructed>0?D.CONSTRUCTIONS_BUILT:D.CONSTRUCTIONS_NOT_BUILT}),(function(e){return e.amountConstructed>0?"white":"black"})),se=function(e){var t=e.name,n=e.amountConstructed,i=e.defenceTotal,r=e.onClick;return Object(O.jsx)(re,{amountConstructed:n,onClick:r,children:Object(O.jsxs)("table",{className:"constructioncard-table",children:[Object(O.jsx)("tr",{className:"constructioncard-row",children:Object(O.jsx)("td",{className:"constructioncard-cell",colSpan:2,children:t})}),Object(O.jsxs)("tr",{className:"constructioncard-row",children:[Object(O.jsxs)("td",{className:"constructioncard-cell",children:[i," DEF"]}),Object(O.jsxs)("td",{className:"constructioncard-cell",children:["x",n]})]})]})})},ce=function(){return Object(O.jsxs)("span",{className:"constructionbar",children:[Object(O.jsx)("b",{children:"Constructions"}),Object(O.jsx)("br",{}),Object(O.jsx)(se,{name:"Spacecraft Hull",amountConstructed:1,defenceTotal:80,onClick:function(){}}),Object(O.jsx)(se,{name:"Engineering Bay",amountConstructed:1,defenceTotal:10,onClick:function(){}}),Object(O.jsx)(se,{name:"Emergency Beacon",amountConstructed:0,defenceTotal:0,onClick:function(){}})]})},ae=function(){var e=function(){for(var e=new Array(11),t=0;t<e.length;t++){e[t]=new Array(11);for(var n=0;n<e[t].length;n++)e[t][n]=new k(R[0],t,n)}e[5][5].type=R[1],e[4][4].type=R[2],e[5][4].type=R[2],e[6][4].type=R[2],e[4][5].type=R[2],e[6][5].type=R[2],e[4][6].type=R[2],e[5][6].type=R[2],e[6][6].type=R[2],e[5][5].characters.push(new P(1,f,v,x.x,x.y,6));var i=[];i.push(new P(1,f,v,x.x,x.y,6));var r=new _,s=[],c=U[0];return s.push(c),{characters:i,phase:r,tiles:e,constructions:s,userPrompt:new B}}(),t=Object(c.useState)(e.characters),n=Object(u.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(e.phase),a=Object(u.a)(s,2),o=a[0],l=a[1],b=Object(c.useState)(e.tiles),h=Object(u.a)(b,2),j=h[0],y=h[1],N=Object(c.useState)(e.constructions),E=Object(u.a)(N,2),T=E[0],M=E[1],S=Object(c.useState)(e.userPrompt),D=Object(u.a)(S,2),F=D[0],Q=D[1],L=Object(c.useState)(!1),W=Object(u.a)(L,2),Y=W[0],z=W[1],G=function(){var e=Object(d.a)(i),t=o,n=F;t.untilNextTurn>0?t.untilNextTurn-=1:(t.turn+=1,t.untilNextTurn=p-1,e[0].ap<v&&(e[0].ap+=1)),n.untilAlertDismissed>0&&(n.untilAlertDismissed-=1),r(Object(d.a)(e)),Q(n),l(t)},J=function(e){var t=F;t.alertActive=e,t.untilAlertDismissed=g,Q(t)},V=function(e,t){return Math.max(Math.abs(j[e][t].coords.x-i[0].coords.x),Math.abs(j[e][t].coords.y-i[0].coords.y))};return Object(c.useEffect)((function(){setInterval(G,1e3)}),[]),Object(c.useEffect)((function(){var e=i[0].coords.x,t=i[0].coords.y;z(5===e&&5===t)}),[i[0].coords.x,i[0].coords.y]),Object(O.jsxs)("div",{className:"ui",children:[Object(O.jsxs)("div",{className:"ui-row1",children:[Object(O.jsx)(m,{tiles:j,onClick:function(e,t){if(i[0].ap>0){if(1===V(e,t)){var n=Object(d.a)(i),s=Object(d.a)(j),c=i[0].coords.x,a=i[0].coords.y;n[0].ap-=1,n[0].coords={x:e,y:t},s[c][a].characters=[],s[e][t].characters.push(n[0]),r(n),y(s)}}else J(w.OUT_OF_AP)}}),Object(O.jsx)(te,{characters:i,tiles:j,construction:T[0],onClickInventory:function(e){var t=i[0].coords.x,n=i[0].coords.y,s=Object(d.a)(i),c=Object(d.a)(j);c[t][n].items.push(i[0].items[e]),s[0].items.splice(e,1),r(s),y(c)},onClickCell:function(e){if(i[0].items.length<=i[0].itemsMax-1){var t=Object(d.a)(i),n=Object(d.a)(j),s=i[0].coords.x,c=i[0].coords.y;t[0].items.push(j[s][c].items[e]),n[s][c].items.splice(e,1),r(t),y(n)}},onDragEnd:function(e){if(e.destination){var t=Object(d.a)(i),n=Object(d.a)(j),s=T,c=i[0].coords.x,a=i[0].coords.y;if(e.source.droppableId===e.destination.droppableId){if("items-inventory"===e.source.droppableId){var o=Array.from(i[0].items),l=o.splice(e.source.index,1),b=Object(u.a)(l,1)[0];o.splice(e.destination.index,0,b),t[0].items=o}if("items-cell"===e.source.droppableId){var h=Array.from(j[c][a].items),O=h.splice(e.source.index,1),m=Object(u.a)(O,1)[0];h.splice(e.destination.index,0,m),n[c][a].items=h}if("items-craft"===e.source.droppableId){var p=Array.from(T[0].items),x=p.splice(e.source.index,1),f=Object(u.a)(x,1)[0];p.splice(e.destination.index,0,f),s[0].items=p}}if(e.source.droppableId!==e.destination.droppableId){var v=Array(0),g=Array(0);if("items-inventory"===e.source.droppableId&&"items-cell"===e.destination.droppableId){v=Array.from(i[0].items),g=Array.from(j[c][a].items);var C=v.splice(e.source.index,1),I=Object(u.a)(C,1)[0];g.splice(e.destination.index,0,I),t[0].items=v,n[c][a].items=g}else if("items-cell"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&i[0].items.length<=i[0].itemsMax-1){v=Array.from(j[c][a].items),g=Array.from(i[0].items);var N=v.splice(e.source.index,1),A=Object(u.a)(N,1)[0];g.splice(e.destination.index,0,A),n[c][a].items=v,t[0].items=g}if("items-inventory"===e.source.droppableId&&"items-craft"===e.destination.droppableId){v=Array.from(i[0].items),g=Array.from(T[0].items);var E=v.splice(e.source.index,1),w=Object(u.a)(E,1)[0];g.splice(e.destination.index,0,w),t[0].items=v,s[0].items=g}else if("items-craft"===e.source.droppableId&&"items-inventory"===e.destination.droppableId&&i[0].items.length<=i[0].itemsMax-1){v=Array.from(T[0].items),g=Array.from(i[0].items);var U=v.splice(e.source.index,1),S=Object(u.a)(U,1)[0];g.splice(e.destination.index,0,S),s[0].items=v,t[0].items=g}if("items-cell"===e.source.droppableId&&"items-craft"===e.destination.droppableId){v=Array.from(j[c][a].items),g=Array.from(T[0].items);var R=v.splice(e.source.index,1),k=Object(u.a)(R,1)[0];g.splice(e.destination.index,0,k),n[c][a].items=v,s[0].items=g}else if("items-craft"===e.source.droppableId&&"items-cell"===e.destination.droppableId){v=Array.from(T[0].items),g=Array.from(j[c][a].items);var _=v.splice(e.source.index,1),P=Object(u.a)(_,1)[0];g.splice(e.destination.index,0,P),s[0].items=v,n[c][a].items=g}}r(t),y(n),M(s)}},isInside:Y}),Y&&Object(O.jsx)(ce,{})]}),Object(O.jsxs)("div",{className:"ui-row2",children:[Object(O.jsx)(C,{phase:o,characters:i}),Object(O.jsx)(I,{onClickSearch:function(){if(i[0].ap>0){var e=Object(d.a)(i),t=Object(d.a)(j);if(e[0].ap-=1,i[0].items.length<=i[0].itemsMax-1)e[0].items.push(H()),r(e);else{var n=i[0].coords.x,s=i[0].coords.y;t[n][s].items.push(H()),r(e),y(t)}}else J(w.OUT_OF_AP)},onClickCraft:function(){if(T[0].items.length<2)J(w.CRAFT_NO_ITEMS);else if(i[0].ap<=0)J(w.OUT_OF_AP);else{var e=Object(d.a)(i),t=Object(d.a)(T);e[0].ap-=1,r(e);var n=!1;ie.forEach((function(e){if(e.itemCombination.length===T[0].items.length){var i=!0,r=Object(d.a)(t[0].items);if(e.itemCombination.forEach((function(e){r.includes(e)?r.splice(r.indexOf(e),1):i=!1})),i)return t[0].items=[e.itemResult],M(t),n=!0,void J(w.CRAFT_SUCCESS)}})),n||J(w.CRAFT_NO_COMBINATION)}}})]}),Object(O.jsx)("div",{className:"ui-row3",children:Object(O.jsx)(A,{alertText:F.alertActive,isVisible:F.untilAlertDismissed>0})})]})},oe=(n(38),function(){return Object(O.jsx)(ae,{})}),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),s(e),c(e)}))};l.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(oe,{})}),document.getElementById("root")),le()}},[[39,1,2]]]);
//# sourceMappingURL=main.819d7e1f.chunk.js.map