(this["webpackJsonpescape-velocity"]=this["webpackJsonpescape-velocity"]||[]).push([[0],{13:function(t,e,s){},22:function(t,e,s){},26:function(t,e,s){"use strict";s.r(e);var i,r,a=s(1),n=s.n(a),c=s(14),h=s.n(c),o=(s(22),s(13),s(2)),l=s(3),p=s(6),u=s(5),d=s(4),j=5,b={x:5,y:5},v=100,y=4,O=[0,60,90,100,100,100,100,100,100,100,100],x=function t(){Object(o.a)(this,t),this.turn=void 0,this.isNight=void 0,this.untilNextTurn=void 0,this.turn=1,this.isNight=!1,this.untilNextTurn=j},f=function t(e,s,i){Object(o.a)(this,t),this.id=void 0,this.name=void 0,this.frequency=void 0,this.id=e,this.name=s,this.frequency=i},m=[new f(0," ",-1),new f(1,"Log",0),new f(2,"Plank",1),new f(3,"Iron Ore",2),new f(4,"Iron Bar",1),new f(5,"Iron Sheet",2),new f(6,"Broken Circuit Board",1),new f(7,"Electronic Component",2),new f(8,"Transistor Radio",999)],k=function(t){for(var e=[],s=0;s<m.length;s++)m[s].frequency===t&&e.push(m[s]);return e},C=function t(e){Object(o.a)(this,t),this.size=void 0,this.slots=void 0,this.size=e,this.slots=new Array(e);for(var s=0;s<this.slots.length;s++)this.slots[s]=m[0]},w=function t(e,s,i,r){Object(o.a)(this,t),this.hp=void 0,this.ap=void 0,this.coords=void 0,this.inventory=void 0,this.hp=e,this.ap=s,this.coords={x:i,y:r},this.inventory=new C(6)},g=function t(e,s,i){Object(o.a)(this,t),this.type=void 0,this.coords=void 0,this.characters=void 0,this.items=void 0,this.type=e,this.coords={x:s,y:i},this.characters=[],this.items=[]},I=s(7),T=s(8),S=T.a.button(i||(i=Object(I.a)(["\n  width: 50px;\n  height: 50px;\n  font-size: ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border: 1px solid white;\n  border-collapse: collapse;\n"])),(function(t){return t.characters.length,"8px"}),(function(t){return 0===t.characters.length?t.tiletype.color:"repeating-linear-gradient(45deg, white, white 10px, "+t.tiletype.color+" 10px,  "+t.tiletype.color+" 20px)"}),(function(t){return 0===t.characters.length?"black":"white"}),(function(t){return 0===t.characters.length?"normal":"bold"})),N=s(0),M=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=[],e=0;e<this.props.tiles.length;e++){for(var s=0;s<this.props.tiles[e].length;s++){var i=this.props.onClick.bind(this,s,e);t.push(Object(N.jsx)(S,{tiletype:this.props.tiles[s][e].type,characters:this.props.tiles[s][e].characters,onClick:i,children:0!==this.props.tiles[s][e].characters.length?"X":"("+s+","+e+")"},"Cell"+s+":"+e))}t.push(Object(N.jsx)("br",{},"LineBreak"+e))}return t}}]),s}(n.a.Component),A=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"Status bar"}),Object(N.jsx)("br",{}),"Turn: ",this.props.phase.turn," (00:00:0",this.props.phase.untilNextTurn,")",Object(N.jsx)("br",{}),"Action points: ",this.props.characters[0].ap," / ",y,Object(N.jsx)("br",{}),"Health points: ",this.props.characters[0].hp," / ",v]})}}]),s}(n.a.Component),z=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"Actions"}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{className:"action",type:"button",value:"Search",onClick:this.props.onClick})]})}}]),s}(n.a.Component),B=T.a.input(r||(r=Object(I.a)(["\n  width: 150px;\n  height: 40px;\n  margin: 3px 3px 3px 3px;\n  background-color: rgb(225, 137, 155);\n"]))),L=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=new Array(this.props.characters[0].inventory.size),e=0;e<t.length;e++){var s=this.props.onClick.bind(this,e);t[e]=Object(N.jsx)(B,{type:"submit",value:this.props.characters[0].inventory.slots[e].name,onClick:s},"ItemInventoryInput"+e)}return Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"Inventory"}),Object(N.jsx)("br",{}),t]})}}]),s}(n.a.Component),F=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){for(var t=this.props.characters[0].coords.x,e=this.props.characters[0].coords.y,s=new Array(this.props.tiles[t][e].items.length),i=0;i<this.props.tiles[t][e].items.length;i++){var r=this.props.onClick.bind(this,i);s[i]=Object(N.jsx)(B,{className:"item",type:"submit",value:this.props.tiles[t][e].items[i].name,onClick:r},"ItemTileInput"+i)}return Object(N.jsxs)("div",{children:[Object(N.jsxs)("b",{children:[this.props.tiles[t][e].type.name," (",t,", ",e,")"]}),Object(N.jsx)("br",{}),Object(N.jsx)("div",{className:"item-panel",children:s})]})}}]),s}(n.a.Component),q=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"Craft"}),Object(N.jsx)("br",{})]})}}]),s}(n.a.Component),P=function t(e,s,i){Object(o.a)(this,t),this.id=void 0,this.name=void 0,this.color=void 0,this.id=e,this.name=s,this.color=i},D=[new P(0,"Forest","#32a871"),new P(1,"Starship","#929da6"),new P(2,"Impact Cleaning","#76a693")],E=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(t){var i;Object(o.a)(this,s),i=e.call(this,t);for(var r=new Array(11),a=0;a<r.length;a++){r[a]=new Array(11);for(var n=0;n<r[a].length;n++)r[a][n]=new g(D[0],a,n)}r[5][5].characters.push(new w(v,y,b.x,b.y)),r[5][5].type=D[1],r[4][4].type=D[2],r[5][4].type=D[2],r[6][4].type=D[2],r[4][5].type=D[2],r[6][5].type=D[2],r[4][6].type=D[2],r[5][6].type=D[2],r[6][6].type=D[2];var c=[];c.push(new w(v,y,b.x,b.y));var h=new x;return i.state={tiles:r,characters:c,phase:h},i.handleClickTile=i.handleClickTile.bind(Object(p.a)(i)),i.handleClickSearch=i.handleClickSearch.bind(Object(p.a)(i)),i.handleClickItemInventory=i.handleClickItemInventory.bind(Object(p.a)(i)),i.handleClickItemTile=i.handleClickItemTile.bind(Object(p.a)(i)),i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){setInterval(this.gameLoop.bind(this),1e3)}},{key:"gameLoop",value:function(){if(this.state.phase.untilNextTurn>1){var t=this.state.phase;t.untilNextTurn-=1,this.setState({phase:t})}else{var e=this.state.phase;e.turn+=1,e.untilNextTurn=j;var s=this.state.characters;s[0].ap<4&&(s[0].ap+=1),this.setState({characters:s,phase:e})}}},{key:"render",value:function(){return Object(N.jsx)("table",{children:Object(N.jsxs)("tbody",{children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{rowSpan:3,children:Object(N.jsx)(M,{tiles:this.state.tiles,onClick:this.handleClickTile})}),Object(N.jsx)("td",{colSpan:3,className:"aux-window",children:Object(N.jsx)(A,{phase:this.state.phase,characters:this.state.characters})})]}),Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:3,className:"aux-window",children:Object(N.jsx)(z,{onClick:this.handleClickSearch})})}),Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{className:"aux-window",children:Object(N.jsx)(L,{characters:this.state.characters,onClick:this.handleClickItemInventory})}),Object(N.jsx)("td",{className:"aux-window",children:Object(N.jsx)(F,{tiles:this.state.tiles,characters:this.state.characters,onClick:this.handleClickItemTile})}),Object(N.jsx)("td",{className:"aux-window",children:Object(N.jsx)(q,{})})]})]})})}},{key:"handleClickTile",value:function(t,e){if(this.state.characters[0].ap>0){if(1===this.distCellToCharacter(t,e)){var s=this.state.characters;s[0].ap-=1;var i=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y;s[0].coords={x:t,y:e};var a=this.state.tiles;a[i][r].characters=[],a[t][e].characters.push(s[0]),this.setState({characters:s,tiles:a})}}else alert("You are out of action points")}},{key:"handleClickSearch",value:function(){if(this.state.characters[0].ap>0){var t=this.state.characters;t[0].ap-=1;for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===m[0]){e=s;break}var i=Math.floor(Math.random()*m.length);if(-1!==e)t[0].inventory.slots[e]=function(){for(var t=100*Math.random(),e=0;e<O.length-1;e++)if(t>O[e]&&t<O[e+1]){var s=k(e),i=s[Math.floor(Math.random()*s.length)];return console.log(t+"    "+e+"    "+i),i}return m[0]}(),this.setState({characters:t});else{var r=this.state.tiles,a=this.state.characters[0].coords.x,n=this.state.characters[0].coords.y;r[a][n].items.push(m[i]),this.setState({tiles:r})}}else alert("You are out of action points")}},{key:"handleClickItemInventory",value:function(t){if(this.state.characters[0].inventory.slots[t].id!==m[0].id){var e=this.state.characters[0].coords.x,s=this.state.characters[0].coords.y,i=this.state.characters,r=this.state.tiles;r[e][s].items.push(this.state.characters[0].inventory.slots[t]),i[0].inventory.slots[t]=m[0],this.setState({characters:i,tiles:r})}}},{key:"handleClickItemTile",value:function(t){for(var e=-1,s=0;s<this.state.characters[0].inventory.size;s++)if(this.state.characters[0].inventory.slots[s]===m[0]){e=s;break}if(-1!==e){var i=this.state.characters[0].coords.x,r=this.state.characters[0].coords.y,a=this.state.characters,n=this.state.tiles;a[0].inventory.slots[e]=this.state.tiles[i][r].items[t],n[i][r].items.splice(t,1),this.setState({characters:a,tiles:n})}}},{key:"distCellToCharacter",value:function(t,e){return Math.max(Math.abs(this.state.tiles[t][e].coords.x-this.state.characters[0].coords.x),Math.abs(this.state.tiles[t][e].coords.y-this.state.characters[0].coords.y))}}]),s}(n.a.Component);var J=function(){return Object(N.jsx)(E,{})},Y=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,27)).then((function(e){var s=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,n=e.getTTFB;s(t),i(t),r(t),a(t),n(t)}))};h.a.render(Object(N.jsx)(n.a.StrictMode,{children:Object(N.jsx)(J,{})}),document.getElementById("root")),Y()}},[[26,1,2]]]);
//# sourceMappingURL=main.62255577.chunk.js.map